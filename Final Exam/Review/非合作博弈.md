### Lecture 3 & 4 整合复习：非合作博弈论基础

博弈论是研究理性决策者之间策略互动的数学模型。我们将从单个决策者的最优选择出发，逐步过渡到多个决策者相互影响的复杂场景。

### 第一部分：微观经济学基础 (单个决策者)

这部分内容是博弈论的基石，主要关注单个理性经济人的决策行为。

#### 1. 偏好、效用与理性人假设

*   **偏好 (Preference)**: 消费者在面临不同选择时，对其进行排序的能力，体现了“喜欢”的程度。
*   **效用 (Utility)**: 衡量消费者从消费中获得的满足感的数值。**效用函数 `u(x)`** 将消费组合 `x` 映射为实数，数值越大代表越偏好。
*   **理性人假设 (Rational Agent Assumption)**: 经济学中的基本假设，认为所有参与者在决策时，都会选择能使自身**效用最大化**的行动。这是后续所有优化问题的前提。

#### 2. 消费者效用最大化问题 (计算题考点)

这是微观经济学中的经典优化问题。
*   **问题描述**: 一个消费者拥有收入 `p`，需要决定如何分配来购买两种商品，商品1价格为 `p₁`，商品2价格为 `p₂`，其效用函数为 `u(x₁, x₂)`。目标是求解使其效用最大化的购买量 `(x₁, x₂)`。
*   **数学模型**:
    $$
    \max_{x_1, x_2} u(x_1, x_2) \quad \text{s.t.} \quad p_1x_1 + p_2x_2 \le p
    $$
*   **求解方法 (通用)**:
    1.  **判断约束**: 因为效用函数 `u` 通常是递增的（多多益善），所以预算约束在最优解时必然取等号，即 $p_1x_1 + p_2x_2 = p$。
    2.  **化为一元优化**: 从预算约束中解出 $x_2 = \frac{p - p_1x_1}{p_2}$，代入效用函数 $u(x_1, \frac{p - p_1x_1}{p_2})$，使其变为关于 $x_1$ 的一元函数。
    3.  **求一阶导数**: 对该一元函数求关于 $x_1$ 的导数，并令其等于 0，解出最优的 $x_1^*$。
    4.  **回代求解**: 将 $x_1^*$ 代回 $x_2$ 的表达式，求出 $x_2^*$。
    *   **备选方法**: 使用**拉格朗日乘数法**，对于更复杂的多商品问题更为通用。

*   **例题：柯布-道格拉斯效用函数 (常见考题)**
    *   **问题**: 设 $u(x_1, x_2) = x_1^\alpha x_2^{1-\alpha}$，预算约束为 $p_1x_1 + p_2x_2 = p$。
    *   **通解**:
        $$
        x_1^* = \frac{\alpha p}{p_1}, \quad x_2^* = \frac{(1-\alpha)p}{p_2}
        $$
    *   **结论**: 消费者在每种商品上的花费占总收入的比例，恰好等于其效用函数中该商品的指数。

#### 3. 市场均衡与社会福利

*   **需求定律**: 价格上涨，需求量减少；价格下降，需求量增加。
*   **供给定律**: 价格上涨，供给量增加；价格下降，供给量减少。
*   **市场出清/竞争均衡 (Market Clearing / Competitive Equilibrium)**: 在供给曲线和需求曲线的交点 E，供给量等于需求量，市场达到均衡。此时的价格 $P_E$ 和数量 $Q_E$ 是均衡价格和均衡数量。
*   **社会福利 (Social Welfare)**: 衡量市场整体效率的指标，等于**消费者剩余**（消费者愿意支付的最高价格与实际支付价格之差的总和）加上**厂商剩余**（厂商实际收到的价格与生产成本之差的总和）。
*   **福利经济学第一定理**: 在完全竞争等理想条件下，市场均衡是**帕累托最优**的，即社会福利最大化。

### 第二部分：从个体决策到策略互动 (多人博弈)

当一个决策者的最优选择依赖于其他决策者的选择时，我们就进入了博弈论的领域。

#### 1. 博弈论基本概念

*   **博弈 (Game)**: 一个描述多个理性、智能的参与者之间策略互动的数学模型。
*   **博弈的要素**:
    *   **参与者 (Players)**: 决策的主体，记为 $i \in N$。
    *   **策略 (Strategies)**: 每个参与者可以选择的行动方案集合，记为 $S_i$。
    *   **支付函数 (Payoff Function)**: 描述在给定所有参与者的策略组合后，每个参与者获得的效用（支付），记为 $u_i(s_1, s_2, ..., s_n)$。
*   **共同知识 (Common Knowledge)**: 指所有参与者都知道某件事，并且所有参与者都知道所有人都知道这件事，以此无限递归。博弈的规则、参与者的理性等通常被假定为共同知识。

#### 2. 博弈的分类

*   **静态博弈 (Static Game)**: 参与者同时（或在不知晓对方选择的情况下）做出决策。常用**策略式（范式）博弈 (Strategic/Normal-form Game)** 表示，即支付矩阵。
*   **动态博弈 (Dynamic Game)**: 参与者有先后顺序地行动，后行动者可以观察到先行动者的选择。常用**扩展式博弈 (Extensive-form Game)** 表示，即博弈树。

### 第三部分：静态博弈的解概念与求解

#### 1. 严格劣策略与重复剔除 (Iterated Elimination of Strictly Dominated Strategies)

*   **严格劣策略 (Strictly Dominated Strategy)**: 对于参与者 `i` 的一个策略 $s_i$，如果存在另一个策略 $t_i$，使得无论其他参与者选择什么策略，选择 $t_i$ 的支付**总是严格高于**选择 $s_i$ 的支付，那么 $s_i$ 就是一个严格劣策略。
    *   **数学定义**: $u_i(t_i, s_{-i}) > u_i(s_i, s_{-i})$ 对所有 $s_{-i} \in S_{-i}$ 成立。
*   **求解方法**:
    1.  **基本假设**: 理性参与者绝不会使用严格劣策略。
    2.  **迭代过程**: 在支付矩阵中，找到任意一个参与者的任意一个严格劣策略，并将其从策略集中剔除（划掉该行或该列）。
    3.  在剩下的更小的博弈中，重复寻找并剔除新的严格劣策略。
    4.  持续这个过程，直到没有严格劣策略可以剔除为止。
    *   **结论**: 最终剩下的策略组合就是博弈的一个解。这个过程与剔除顺序无关。

*   **弱劣策略 (Weakly Dominated Strategy)**: 与严格劣策略类似，但允许在某些情况下支付相等。即 $u_i(t_i, s_{-i}) \ge u_i(s_i, s_{-i})$ 恒成立，且至少对一个 $s_{-i}$ 严格大于。
    *   **注意**: 剔除弱劣策略的结果可能与剔除顺序有关，需谨慎使用。

#### 2. 纳什均衡 (Nash Equilibrium) (核心考点)

这是博弈论中最核心的解概念。
*   **概念**: 一个策略组合，其中**没有任何一个参与者**可以通过**单方面**改变自己的策略而获得更高的收益。它是一个稳定的、自我强制执行的均衡点。
*   **求解方法 (支付矩阵)**:
    1.  **最佳应对法 (Best Response Method)**:
        *   固定一个参与者（如**列玩家**）的策略。
        *   找出另一个参与者（**行玩家**）在这种情况下能获得最高支付的策略（即最佳应对），并在对应的支付数值上做标记（如画下划线）。
        *   对列玩家的所有策略重复此步骤。
        *   交换角色，固定行玩家的策略，找出列玩家的最佳应对，并在对应数值上做标记。
        *   **所有参与者的支付数值都被标记**的那个单元格，其对应的策略组合就是一个（纯策略）纳什均衡。
*   **连续策略博弈的纳什均衡求解 (计算题考点)**
    *   **问题描述**: 参与者的策略是连续变量（如产量、价格）。
    *   **求解方法 (反应函数法)**:
        1.  **写出支付函数**: 为每个参与者 `i` 写出其支付函数 $u_i(s_i, s_{-i})$，其中 $s_i$ 是自己的策略，$s_{-i}$ 是其他人的策略。
        2.  **求反应函数 (Reaction Function)**: 对每个参与者 `i`，将其支付函数 $u_i$ 对自己的策略 $s_i$ 求偏导数，并令其等于0。
            $$
            \frac{\partial u_i(s_i, s_{-i})}{\partial s_i} = 0
            $$
            从上式中解出 $s_i$ 关于 $s_{-i}$ 的函数，即 $s_i = R_i(s_{-i})$。这个函数就是参与者 `i` 的**最佳反应函数**。
        3.  **求解方程组**: 纳什均衡是所有参与者的最佳反应函数曲线的交点。因此，联立所有参与者的反应函数，解这个方程组，得到的解 $(s_1^*, s_2^*, ...)$ 就是纳什均衡。

*   **例题：古诺竞争 (Cournot Competition)**
    *   **场景**: 两家公司同时决定产量 $q_1, q_2$。市场价格由总产量决定 $P(Q) = a - bQ = a - b(q_1+q_2)$。公司 `i` 的生产成本为 $c_i$。
    *   **支付函数**: $\pi_i(q_1, q_2) = (P(Q) - c_i)q_i = (a - b(q_1+q_2) - c_i)q_i$
    *   **通解**:
        $$
        q_1^* = \frac{a - 2c_1 + c_2}{3b}, \quad q_2^* = \frac{a - 2c_2 + c_1}{3b}
        $$

#### 3. 混合策略纳什均衡 (Mixed Strategy Nash Equilibrium)

*   **概念**: 当纯策略纳什均衡不存在时（如石头剪刀布），参与者会以一定的概率随机选择不同的纯策略。一个**混合策略**就是一个在纯策略集上的概率分布。混合策略纳什均衡指的是，在这种概率选择下，没有任何参与者能通过单方面改变自己的混合策略（即改变概率分布）来提高自己的期望支付。
*   **求解方法 (无差异原则)**:
    *   **核心思想**: 在一个混合策略纳什均衡中，如果一个参与者以正概率选择多个纯策略，那么这些纯策略带给他的**期望支付必定是相等的**。否则，他就会把所有概率都分配给期望支付最高的那个策略。
    *   **计算步骤 (2x2博弈)**:
        1.  设行玩家以概率 `p` 选择策略“上”，以概率 `1-p` 选择“下”。
        2.  设列玩家以概率 `q` 选择策略“左”，以概率 `1-q` 选择“右”。
        3.  **行玩家无差异**: 行玩家在选择“上”和“下”时，对列玩家的混合策略 `(q, 1-q)` 的期望支付相等。据此建立一个关于 `q` 的方程，解出 `q*`。
        4.  **列玩家无差异**: 列玩家在选择“左”和“右”时，对行玩家的混合策略 `(p, 1-p)` 的期望支付相等。据此建立一个关于 `p` 的方程，解出 `p*`。
        5.  得到的 `(p*, 1-p*)` 和 `(q*, 1-q*)` 就是混合策略纳什均衡。

### 第四部分：动态博弈的解概念与求解

#### 1. 子博弈与子博弈完美纳什均衡 (SPNE)

*   **子博弈 (Subgame)**: 扩展式博弈的一部分，它本身也构成一个完整的博弈。一个子博弈始于一个**单例信息集**（即该决策点上，玩家确切知道自己所在的位置），并包含该决策点之后的所有后续节点和路径。
*   **子博弈完美纳什均衡 (Subgame Perfect Nash Equilibrium, SPNE)**: 对纳什均衡的精炼，要求一个策略组合在**每一个子博弈**中都必须构成纳什均衡。
*   **目的**: SPNE排除了那些包含**不可置信威胁 (non-credible threat)** 的纳什均衡。即某个参与者声称要采取某种对自己不利的行动来威胁他人，但如果博弈真的进行到那个阶段，他实际上不会那样做。

#### 2. 逆向归纳法 (Backward Induction)

*   **概念**: 求解有限完美信息动态博弈中 SPNE 的核心方法。
*   **步骤**:
    1.  从博弈树的**最后一个决策点**（或最后的子博弈）开始分析。
    2.  确定在该决策点上，轮到行动的参与者的最优选择。
    3.  将该决策点的后续部分用这个最优选择的支付结果来替代，相当于将博弈树“剪枝”。
    4.  向前倒推到上一个决策点，重复此过程，直到分析完整个博弈树的起点。
*   **结论**: 通过逆向归纳法找到的路径和策略组合，就是该博弈的子博弈完美纳什均衡。
