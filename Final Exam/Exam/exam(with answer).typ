#set document(
  title: "数据要素交易基础",
  author: "forliage",
)

// --- 页面与字体设置 ---
#set page(
  paper: "a4",
  margin: (x: 2.5cm, y: 2.2cm),
  // 页眉：显示课程标题
  header: align(center)[
    #text(10pt, fill: gray)[数据要素交易基础]
    #line(length: 100%, stroke: 0.5pt + gray)
  ],
  // 页脚：显示页码
  //footer: align(right)[#counter(page)]
)

// 设置中英文基础字体，保证跨平台兼容性
// 如果你有特定的字体，可以替换 "New Computer Modern" 和 "Noto Serif CJK SC"
// 比如 Windows 用户可以使用 "STSong" "SimSun" 等
#set text(
  font: ("New Computer Modern", "Noto Serif CJK SC"),
  size: 11pt,
  lang: "zh",
)


// --- 颜色定义 ---
#let primary_color = rgb("#007A7A") // 深青色 (Teal)
#let accent_color = rgb("#FFB81C")  // 亮黄色 (Amber)
#let text_color = rgb("#333333")    // 深灰色
#let bg_color = rgb("#F5F7F7")      // 极浅的背景灰

#set text(fill: text_color)

// --- 标题样式定义 ---
// 一级标题
#show heading.where(level: 1): it => {
  v(1.8em, weak: true) // 标题前的垂直间距
  let title_text = text(18pt, weight: "bold", primary_color, it.body)
  [
    #title_text
    #line(length: 100%, stroke: 1pt + primary_color)
  ]
  v(1em, weak: true) // 标题后的垂直间距
}

// 二级标题
#show heading.where(level: 2): it => {
  v(1.2em, weak: true)
  // 在标题前加一个装饰性的方块
  rect(width: 6pt, height: 6pt, fill: accent_color)
  h(6pt)
  text(14pt, weight: "bold", it.body)
  v(0.6em, weak: true)
}

// --- 自定义笔记模块 ---

// 定义模块
#let definition(title, body) = {
  block(
    stroke: (left: 2pt + primary_color),
    radius: 3pt,
    inset: 10pt,
    width: 100%,
    breakable: true,
  )[
    #text(weight: "bold")[定义：#title]
    \
    #body
  ]
}

// 定理模块 (自动编号)
#let theorem_counter = counter("theorem")
#let theorem(title, body) = {
  theorem_counter.step()
  block(
    fill: bg_color,
    radius: 3pt,
    inset: 10pt,
    width: 100%,
    breakable: true,
  )[
    #text(weight: "bold")[定理 #theorem_counter.display("1")：#title]
    \
    #body
  ]
}

// 示例模块
#let example(title, body) = {
  v(0.5em)
  block(
    stroke: (top: 1pt + accent_color.lighten(20%)),
    inset: (top: 10pt, bottom: 10pt, x: 8pt),
    width: 100%,
    breakable: true,
  )[
    #text(weight: "bold", style: "italic", accent_color)[示例：#title]
    \
    #body
  ]
  v(0.5em)
}

// 关键点模块
#let keypoint(body) = {
  block(
    fill: accent_color.lighten(80%),
    radius: 4pt,
    inset: 10pt,
    width: 100%,
    breakable: true,
  )[
    *💡 关键点* \
    #body
  ]
}

// 重要公式模块 (自动编号)
#let formula_counter = counter("formula")
#let formula(eq) = {
  formula_counter.step()
  align(center, $ #eq $)
  align(right, text(9pt, fill: gray)[(#formula_counter.display())])
  v(0.5em)
}

// --- 标题页函数 ---
#let title_page() = {
  // 禁用当前页的页眉页脚
  set page(header: none, footer: none)
  align(center + horizon)[
    #v(3cm)
    #text(28pt, weight: "bold")[数据要素交易基础]
    #v(1cm)
    #text(16pt)[Course Notes]
    #v(2cm)
    #line(length: 30%, stroke: 0.5pt)
    #v(2cm)
    #grid(
      columns: (1fr, 2fr),
      gutter: 1em,
      [讲师：], [刘金飞],
      [学期：], [2025 年暑],
      [学生：], [forliage],
    )
    #v(6cm)
  ]
  // 恢复页眉页脚
  pagebreak()
  set page(
    header: align(center)[#text(10pt, fill: gray)[数据要素交易基础]#line(length: 100%, stroke: 0.5pt + gray)],
    footer: align(right)[#counter(page).display("1 / 1")]
  )
  counter(page).update(1) // 重置页码为1
}

= 期末测试（解答版）

== 一、名词解释（每题2分，共10分）

1.柠檬市场  

2.子博弈完美均衡 

3.组合无套利 
 
4.DSIC 
 
5.比较优势

*Solution:*

1.柠檬市场：柠檬市场是指在信息不对称的情况下，卖方比买方拥有更多关于产品质量的信息，导致买方因无法分辨好坏而只愿意支付基于平均质量的价格。这使得高质量产品的卖方无利可图而退出市场，最终市场上只剩下低质量的“次品”（即柠檬），出现“劣币驱逐良币”的市场失灵现象。（来源：Lecture 3, page 4, 第8节“市场失灵”的最后一个段落及 page 5 的二手车市场例子）

2.子博弈完美均衡:在扩展式博弈中，一个策略向量是子博弈完美均衡，指的是该策略向量在整个博弈的每一个子博弈上都构成一个纳什均衡。这一概念通过要求策略在博弈的每个阶段都必须是最优的，从而排除了那些包含不可置信威胁的纳什均衡。
(来源：Lecture 4, page 4, 第3节“子博弈完美均衡”的定义部分)

3.组合无套利:组合无套利是指在数据定价中，一个查询如果可以被拆分为多个子查询来完成，那么这一个整体查询的价格不应高于所有子查询价格的总和。这个原则旨在防止买家通过组合多个低价查询来绕开一个高价的等效查询，从而实现套利。
(来源：Lecture 9, page 4, 标题为“组合无套利研究...”下的定义部分)
 
4.DSIC:DSIC是“占优策略激励相容”（Dominant-Strategy Incentive Compatible）的缩写。在机制设计中，如果一个机制使得每个参与者无论其他人的策略如何，其自身的占优策略都是诚实地报告自己的类型（如真实估值），那么这个机制就是DSIC的。
(来源：Lecture 7, page 7, 第3节“直接显示机制”的定义2)
 
5.比较优势:如果一个生产者在生产某种物品时，其机会成本（即为生产该物品而必须放弃的其他物品的数量）低于另一个生产者，那么我们就说这个生产者在生产该物品上具有比较优势。贸易的基础是比较优势，而非绝对优势。
(来源：Lecture 1, page 4, 第4节“比较优势”的定义部分)

== 二、单项选择题（每题2分，共18分）

1.下列哪种方法是通过向数据添加随机噪声实现隐私保护的：
$ " "(a)"差分隐私" "   "(b)"安全多方计算" "   "(c)"零知识证明" "   "(d)"同态加密"$

2.假如全班同学玩一个游戏：要求每位同学给出一个 0 到 100 之间的实数，最后所给数字最接近全
班给出的数字的平均数的$1/2$的同学获胜，以下哪种策略构成纯策略纳什均衡：

$"  "(a)"所有同学都给出 0"$

$"  "(b)"所有同学都给出 50"$

$"  "(c)"所有同学都给出 25"$

$"  "(d)"一半同学给出 0，一半同学给出 50"$

3.假设你（参与人 1）和另一个同学（参与人 2）闹矛盾，你们可以选择打架或者不打架，但是对方
不清楚你的实力，因此对于对方而言，以下两个表格的情况都可能出现：左边的表格代表你比对
方强，右边的表格代表你比对方弱：

#figure(
  image("/images/image37.png", width: 80%),
) <fig:fig37>

$"  "$假设对方认为你比他强或弱的概率均为 1/2，以下哪项是贝叶斯纯策略纳什均衡：

$"  "(a)"参与人 1 强类型时打架，弱类型时打架，参与人 2 选择打架"$

$"  "(b)"参与人 1 强类型时打架，弱类型时打架，参与人 2 选择不打架"$

$"  "(c)"参与人 1 强类型时打架，弱类型时不打架，参与人 2 选择不打架"$

$"  "(d)"参与人 1 强类型时打架，弱类型时不打架，参与人 2 选择打架"$

4.考虑如下三人$A,B,C$的合作博弈，联盟效用函数为$u(Phi)=0,u(A)=1,u(B)=3,u(C)="  "2,u(A B)=5,u(A C)=4, u(B C)=8, u(A B C)=20$，下列说法正确的是：

$"  "(a)"该博弈的核是空集"$

$"  "(b)"该博弈的核中只包含一个点"$

$"  "(c)"该博弈中" A "的沙普利值比" B "的沙普利值高"$

$"  "(d)"该博弈的沙普利值在核中"$

5.关于多臂老虎机算法，下列说法正确的是：

$"  "(a)"贪心算法探索阶段参数" N"（每个臂探索的次数）的取值与最后的遗憾无关"$

$"  "(b)"UCB 算法的思想是多选择过往表现好的臂以及过往尝试较少的臂"$

$"  "(c)"虽然汤普森采样算法比较简洁，但其遗憾界不如 UCB 算法"$

$"  "(d)"存在确定性算法在对抗性多臂老虎机情形下是无憾的"$

6.关于单物品拍卖，下列说法正确的是：

$"  "(a)"单物品第二价格拍卖与英式拍卖在考虑相互依赖价值时等价"$

$"  "(b)"单物品第一价格拍卖与英式拍卖在不考虑相互依赖价值时等价"$

$"  "(c)"竞拍者估值独立同分布的情况下，单物品第一价格拍卖的对称递增均衡满足事后有效率性"$

$"  "(d)"均衡情况下单物品第三价格拍卖的卖家收益一定与单物品一价拍卖、二价拍卖相等"$

7.以下哪项属于 VCG 机制的不足之处：

$"  "(a)"不是事后有效率的机制"$

$"  "(b)"只能应用于买家估值有先验分布的情况"$

$"  "(c)"可能出现竞拍者增多但卖家收入降低的情况"$

$"  "(d)"与二价拍卖不兼容"$

8.假设买家希望购买一个线性回归模型，卖家的版本化方法是对其线性回归的某个系数添加高斯噪声$epsilon ~ N(0,sigma^2)$，每次添加的噪声之间相互独立。如果添加$epsilon_1 ~ N(0,2)$的模型价格为$p_1$，添加$epsilon_2 ~ N(0,3)$的模型价格为$p_2$，添加$epsilon_3 ~ N(0,4)$的模型价格为$p_3$，如下哪一组定价是满足无套利条件的：

$"  "(a) p_1 = 7, p_2 = 8, p_3 = 9$

$"  "(b) p_1 = 7, p_2 = 6, p_3 = 5$

$"  "(c) p_1 = 7, p_2 = 10, p_3 = 15$

$"  "(d) p_1 = 7, p_2 = 5, p_3 = 3$

9.假设有一个厂商出售商品，有三个具有单位需求的消费者，他们对商品可能的估值集合为$V={1,2,3}$。厂商对消费者估值的先验分布为$(1/4, 1/2, 1/4)$（即有 $1/4$ 的概率为 1，$1/2$ 的概率为 2，$1/4$ 的概率为 3），则厂商对消费者实施三级价格歧视的福利三角形对应的三条约束为（记厂商福
利为$pi$，消费者福利为$u$）

$"  "(a) u>=0, pi >= 3/2, pi + u <= 2$

$"  "(b) u >= 0, pi >= 3/4, pi + u <= 2$

$"  "(c) u >= 0, pi <= 3/2, pi + u >=2$

$"  "(d) u>= 0, pi <= 3/4, pi + u >=2$

== 三、简答与计算：纳什均衡（14分）

$n$个研究课题组希望购买一份数据供研究使用，每个课题组有两种选择：买或不买，他们的决策是独立做出的（互相之间没有交流）。并且只要有一个课题组购买，所有课题组就可以共用数据。购买数据为每个课题组带来的效用为$u$，购买数据的课题组需要支付价格$p$。设$u > p >0$，每个课题组的效
用函数形式为拟线性效用函数，回答下列问题：

1.（3 分）“只要有一个课题组购买，所有课题组就可以共用数据”体现了数据的什么性质？基于这一
性质简要谈一谈为什么数据产权问题是重要的；

2.（5 分）将上述场景定义为策略式博弈，并求解博弈的纯策略纳什均衡；

3.（6 分）称一纳什均衡是对称的，如果在该纳什均衡中，所有参与人的策略（纯策略或混合策略）都
是相同的。求解该博弈的对称混合策略纳什均衡，并说明从这一结果中能得到的启示。

== 四、简答与计算：不确定性下的数据定价（15 分）

考虑一个数据卖家出售一份数据的场景，但此时卖家不知道这份数据对于买家的价值。考虑下面
三种定价场景并回答相应的问题：

1.（6 分）如果买家是逐个到达市场的，可以将买家估值视为对抗性多臂老虎机给出的，因此可以使
用乘性权重（MWU）算法。请给出 MWU 算法应用于这一场景下的伪代码，并给出伪代码的解
释，特别需要解释代价的定义；

提示：价格本质上是离散的，因为价格有最小单位（如人民币的 “分”），并且合理的价格是有界
的，故可以使用 MWU 算法；

2.（6 分）如果聚集了$n$个买家，则可以使用拍卖的方式诚实显示买家的估值。设$n$个买家对数据
的估值都服从$[200, 500]$上的均匀分布，请给出卖家的最优拍卖机制，以及实施最优拍卖机制下
的卖家期望收益；

提示：数据可以零成本复制，且买家具有单位需求；

3.（3 分）更现实的情况下的出售机制：现实中很少使用拍卖的方式出售数据，因此问题是现实中还
有什么解决卖家对数据对于买家的价值不确定性问题的定价方法？给出一种方法，并说明这一方
法能解决不确定性的理由。

== 五、简答与计算：贝叶斯劝说（13 分）

1. 贝叶斯劝说是一种重要的信息设计方法，请简要叙述：

$"  "(a)"（3 分）信息设计和机制设计的异同；"$

$"  "(b)"（3 分）信息设计的显示原理和机制设计的显示原理的异同；"$

2. 考虑上课讲的导师给学生写推荐信的例子，与上课例子不同的地方在于：第一，企业和导师对学
生类型的共同先验分布设为可变参数$p in (0,1)$，即$mu_0 ("excellent")=p, mu_0 ("average")=1-p$；第二，企业在招收到优秀的学生时获得效用仍为 1，但招到普通学生时获得效用为 −2，回答以下问题：

$"  "(a)"（2 分）求"p"的范围使得导师设计信号机制相比于先验情况可以得到严格更高的效用；"$

$"  "(b)"（5 分）若" p = 0.5，"求导师最优的写推荐信策略。"$

== 六、课程反馈（30 分）

1.（10 分）在这门课中你觉得最有收获的是哪一节，让你最困惑的是哪一节，为什么？

2.（10 分）在这门课中你觉得最需要改进的是哪些方面？例如教学内容的选择、课程安排、考核方式、课堂氛围等。

3.（10 分）畅所欲言你在这门课的任何感受，或者任何想对老师和助教说的话。